该前端项目是基于夜莺n9e前端二次开发的项目，为了后续可以继续适配更新夜莺代码应遵循：
为了满足“可更新性”的要求，我们提出\*\*“模块化隔离（Modular Isolation）”**的代码组织策略。我们强烈建议**不要\*\*直接在原有的 `pages` 或 `components` 目录下混合存放自定义文件。相反，应采用如下结构：

**表 1: 推荐的二次开发目录结构**

| **路径**                    | **说明**       | **维护策略**                                   |     |     |     |
| --------------------------- | -------------- | ---------------------------------------------- | --- | --- | --- |
| `src/`                      | 源码根目录     | 保持原样                                       |     |     |     |
| `src/routes/index.tsx`      | 核心路由配置   | **仅做最小化修改**（引入自定义路由模块）       |     |     |     |
| `src/components/Menu/`      | 菜单配置       | **仅做最小化修改**（插入自定义菜单项）         |     |     |     |
| `src/extensions/`           | **新建目录**   | **全量自定义代码存放区**                       |     |     |     |
| `src/extensions/my-module/` | 自定义功能模块 | 内部结构模仿`src`(pages, components, services) |     |     |     |
| `vite.config.ts`            | 构建配置       | **修改**（添加自定义后端代理）                 |     |     |     |

策略解读：

这种结构的核心思想是将自定义代码物理隔离在 src/extensions 目录下。当上游仓库更新时，Git 合并冲突将主要集中在 routes/index.tsx 和 vite.config.ts 等极少数入口文件上，而核心业务逻辑所在的 extensions 目录将完全不受影响。这极大地降低了代码合并的认知负荷和出错概率。


## 3. 开发环境配置：双路代理（Dual-Proxy）架构

用户的一个核心需求是“调取我新增功能的后端项目”。这意味着前端应用在运行时，需要同时与两个不同的后端服务通信：

1. **Nightingale Core Backend**：处理登录、监控数据、告警规则等核心功能（通常运行在 `17000` 端口）。
2. **Custom Backend**：处理用户新增的业务逻辑（假设运行在 `8080` 端口）。

由于浏览器的同源策略（Same-Origin Policy），直接请求不同端口的 API 会触发 CORS 错误。在开发环境下，利用 Vite 的代理功能是解决此问题的标准方案。

### 3.1 Vite 反向代理配置详解

Vite 的 `server.proxy` 选项允许我们将特定前缀的请求转发到不同的后端目标 <sup>6</sup>。我们需要在 `vite.config.ts` 中配置“双路代理”。

**架构图示（文字版）：**

- 浏览器请求 `/api/n9e/v1/login` -\> Vite Dev Server -\> 转发至 `localhost:17000`
- 浏览器请求 `/api/custom/v1/data` -\> Vite Dev Server -\> 转发至 `localhost:8080`